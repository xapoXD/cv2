@page "/vybaveni"

<h1>Hospital equipment!</h1>

<button style="color:blue" @onclick="@NewMod">Add record </button>

<table>

    <tr>
        <th>Name</th>
        <th>Bought Date</th>
        <th>Date of a last revision</th>
        <th>Needs revision?</th>
    </tr>

    <tbody>
        @foreach (var item in vybaveni_list)
        {

               <VybaveniRow  Item=item DeleteItemCallback="() => vybaveni_list.Remove(item)"/>
        }
    </tbody>

</table>




@code {
    bool isInNewMode;

    public static List<VybaveniModel> vybaveni_list = new List<VybaveniModel>();

    protected override void OnInitialized()
    {
        base.OnInitialized();

        for (int i = 0; i < rnd.Next(10, 30); i++)
        {
            VybaveniModel mod = new VybaveniModel(RandomString(10), RandomDay(), RandomDay2(), false, false);
            vybaveni_list.Add(mod);
        }

    }

    Random rnd = new Random();

    private static Random random = new Random();


    private Random gen = new Random();
    DateTime RandomDay()
    {
        DateTime start = new DateTime(2015, 1, 1);
        int range = (DateTime.Today - start).Days;
        return start.AddDays(gen.Next(range));
    }

    private Random gen1 = new Random();
    DateTime RandomDay2()
    {
        DateTime start = new DateTime(2016, 1, 1);
        int range = (DateTime.Today - start).Days;
        return start.AddDays(gen1.Next(range));
    }


   


    public static string RandomString(int length)
    {
        const string chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        return new string(Enumerable.Repeat(chars, length).Select(s => s[random.Next(s.Length)]).ToArray());
    }




    void NewMod()
    {
         VybaveniModel mod = new VybaveniModel(RandomString(10), RandomDay(), RandomDay2(), false, false);
         vybaveni_list.Add(mod);
    }



}